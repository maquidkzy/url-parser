<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0"><title>URL Tool Pro</title><style>:root{--p:#4285f4;--bg:#f8f9fa;--sbg:#fff;--cbg:#fff;--t:#202124;--t2:#5f6368;--b:#dfe1e5;--h:#f1f3f4;--sh:rgba(32,33,36,0.28);--s-bg:#e6f4ea;--s-tx:#137333;--if:#f1f3f4;--lk:#1a73e8;--sb:#202124;--sr:#d93025;--sl:#1a73e8;--se:#5f6368;--sv:#bc8df3}[data-theme="dark"]{--bg:#202124;--sbg:#292a2d;--cbg:#303134;--t:#e8eaed;--t2:#9aa0a6;--b:#5f6368;--h:#3c4043;--sh:rgba(0,0,0,0.5);--s-bg:#0f5223;--s-tx:#81c995;--if:#3c4043;--lk:#8ab4f8;--sb:#e8eaed;--sr:#ff8a80;--sl:#8ab4f8;--se:#9aa0a6}body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif;background:var(--bg);color:var(--t);margin:0;height:100vh;overflow:hidden;display:flex}
/* Sidebar */
.sb{width:280px;background:var(--sbg);border-right:1px solid var(--b);display:flex;flex-direction:column;flex-shrink:0;z-index:10;transition:width 0.3s cubic-bezier(0.4,0,0.2,1);overflow:hidden;white-space:nowrap}.sb.col{width:0;border:none}.sb-h{padding:15px;border-bottom:1px solid var(--b);display:flex;justify-content:space-between;align-items:center}.sb-h h3{margin:0;font-size:16px;color:var(--t2)}.sb-act{display:flex;gap:10px}.txt-btn{background:none;border:none;color:var(--t2);font-size:12px;cursor:pointer;text-decoration:underline;padding:0}.txt-btn:hover{color:var(--sr)}.hl{flex:1;overflow-y:auto;list-style:none;padding:0;margin:0}.hi{padding:12px 15px;border-bottom:1px solid var(--b);cursor:pointer;position:relative}.hi:hover{background:var(--h)}.hu{font-size:13px;color:var(--t);overflow:hidden;text-overflow:ellipsis;display:block;font-weight:500;margin-bottom:2px}.ht{font-size:11px;color:var(--t2)}.h-del{position:absolute;right:5px;top:50%;transform:translateY(-50%);background:none;border:none;color:var(--t2);cursor:pointer;padding:5px;display:none;font-size:16px}.hi:hover .h-del{display:block}.h-del:hover{color:var(--sr)}.sb-f{padding:15px;border-top:1px solid var(--b);display:flex;justify-content:space-between;align-items:center}
/* Toggle */
.sw{position:relative;width:40px;height:22px}.sw input{opacity:0;width:0;height:0}.sld{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background:#ccc;transition:.4s;border-radius:34px}.sld:before{position:absolute;content:"";height:16px;width:16px;left:3px;bottom:3px;background:#fff;transition:.4s;border-radius:50%}input:checked+.sld{background:var(--p)}input:checked+.sld:before{transform:translateX(18px)}
/* Main */
.main{flex:1;display:flex;flex-direction:column;align-items:center;overflow-y:auto;padding:20px;position:relative}.ctr{width:100%;max-width:800px}.top-bar{display:flex;align-items:center;margin-bottom:20px;position:relative}.tog-sb{background:none;border:none;color:var(--t2);cursor:pointer;padding:8px;border-radius:50%;margin-right:15px}.tog-sb:hover{background:var(--h);color:var(--t)}h1{font-weight:500;color:var(--t2);margin:0 auto;font-size:24px}
/* Search */
.s-wrap{margin-bottom:30px}.s-box{position:relative;background:var(--cbg);border:1px solid var(--b);border-radius:24px;padding:10px 10px 10px 25px;box-shadow:0 1px 6px var(--sh);transition:0.2s;display:flex;flex-direction:column}.s-box:focus-within{box-shadow:0 1px 6px var(--sh),0 2px 10px rgba(0,0,0,0.1);border-color:rgba(0,0,0,0)}.inp-wrap{position:relative;width:100%;min-height:40px}.url-lay{font-family:'Courier New',monospace;font-size:26px;line-height:1.5;width:100%;padding:0;border:none;margin:0;white-space:pre-wrap;word-break:break-all;box-sizing:border-box}#uh{position:absolute;top:0;left:0;z-index:1;color:var(--sb);pointer-events:none;background:0 0}#ui{position:relative;z-index:2;background:0 0;color:transparent;caret-color:var(--t);outline:0;resize:none;overflow:hidden;display:block}.acts{display:flex;align-items:center;margin-top:5px;height:34px}.cc{font-size:12px;color:var(--t2);padding-right:10px;border-right:1px solid var(--b);margin-right:8px}.ib{background:0 0;border:0;cursor:pointer;padding:8px;border-radius:50%;color:var(--t2);display:flex;transition:0.2s}.ib:hover{background:var(--h);color:var(--t)}.meta{display:flex;justify-content:space-between;margin-top:8px;padding:0 15px;font-size:12px;color:var(--t2)}.ex-lnk{background:0 0;border:0;color:var(--lk);cursor:pointer;padding:0;font-family:monospace}.ex-lnk:hover{text-decoration:underline}
/* Results */
.res{display:none;flex-direction:column;gap:15px}.sec{font-size:12px;text-transform:uppercase;letter-spacing:1px;color:var(--t2);font-weight:700;margin-bottom:8px}.cd{background:var(--cbg);border:1px solid var(--b);border-radius:8px;overflow:hidden}.pr{display:flex;justify-content:space-between;align-items:center;padding:10px 20px;border-bottom:1px solid var(--b)}.pr:last-child{border-bottom:none}.pi{display:flex;flex-direction:column;flex:1;padding-right:15px}.ph{display:flex;justify-content:space-between;margin-bottom:4px}.pk{font-size:11px;color:var(--t2);font-weight:700}.pl{font-size:10px;color:var(--t2);opacity:.8}.pv{font-size:15px;font-family:'Courier New',monospace;color:var(--t);background:0 0;border:1px solid transparent;border-radius:4px;width:100%;padding:2px 0;outline:0}.pv:hover{border-bottom:1px solid var(--b)}.pv:focus{background:var(--if);border-bottom:2px solid var(--p)}.pv::placeholder{color:var(--t2);font-style:italic;opacity:.5}.cp-btn{background:var(--h);border:0;border-radius:4px;padding:6px 10px;font-size:11px;cursor:pointer;color:var(--t);transition:0.2s}.cp-btn:hover{background:#dcdcdc}.cp-btn.ok{background:var(--s-bg);color:var(--s-tx)}
/* Syntax */
.hr{color:var(--sr);font-weight:700}.hb{color:var(--sl)}.he{color:var(--se);font-weight:700}.hv{color:var(--sv)}@media(max-width:768px){.sb{position:absolute;height:100%;box-shadow:2px 0 5px rgba(0,0,0,0.2)}.sb.col{width:0}}::-webkit-scrollbar{width:6px}::-webkit-scrollbar-track{background:0 0}::-webkit-scrollbar-thumb{background:#bdc1c6;border-radius:3px}[data-theme="dark"] ::-webkit-scrollbar-thumb{background:#5f6368}</style></head><body><aside class="sb" id="sb"><div class="sb-h"><h3>History</h3><div class="sb-act"><button class="txt-btn" id="csvBtn" title="Export CSV">CSV</button><button class="txt-btn" id="clrBtn">Clear</button></div></div><ul class="hl" id="hl"><li style="padding:20px;text-align:center;font-size:13px;color:var(--t2);font-style:italic">No history</li></ul><div class="sb-f"><span style="font-size:14px">Dark Mode</span><label class="sw"><input type="checkbox" id="tm"><span class="sld"></span></label></div></aside><main class="main"><div class="ctr"><div class="top-bar"><button class="tog-sb" id="tgSb"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></button><h1>URL Pro</h1></div><div class="s-wrap"><div class="s-box"><div class="inp-wrap"><div id="uh" class="url-lay"></div><textarea id="ui" class="url-lay" rows="1" placeholder="Paste URL..." spellcheck="false"></textarea></div><div class="acts"><span id="cc" class="cc">0 chars</span><button class="ib" id="svBtn"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path><polyline points="17 21 17 13 7 13 7 21"></polyline><polyline points="7 3 7 8 15 8"></polyline></svg></button><button class="ib" id="cpBtn"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg></button></div></div><div class="meta"><div class="ex">Try: <button id="exLnk" class="ex-lnk">https://site.com/?a=1&amp;b=2</button></div><div>Press <strong>Enter</strong> to save</div></div></div><div id="res" class="res"><div><div class="sec">Standard UTM</div><div class="cd" id="ul"></div></div><div id="os" style="display:none"><div class="sec">Other Params</div><div class="cd" id="ol"></div></div></div></div></main><script>
const G=id=>document.getElementById(id),ui=G('ui'),uh=G('uh'),res=G('res'),ul=G('ul'),ol=G('ol'),os=G('os'),hl=G('hl'),cc=G('cc'),man=['utm_source','utm_medium','utm_campaign','utm_term','utm_content'];
let H=JSON.parse(localStorage.getItem('uah')||'[]');const svH=()=>localStorage.setItem('uah',JSON.stringify(H));
const esc=t=>(t||'').replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");
const cp=(t,b)=>{navigator.clipboard.writeText(t).then(()=>{const o=b.innerHTML,c=b.classList.contains('ib');if(c){b.style.color='var(--s-tx)';setTimeout(()=>b.style.color='',1e3)}else{b.innerText='Copied!';b.classList.add('ok');setTimeout(()=>{b.innerText='Copy';b.classList.remove('ok')},1e3)}})};
function upBox(){ui.style.height='auto';ui.style.height=ui.scrollHeight+'px';const t=ui.value,s=esc(t),q=s.indexOf('?');let h=s;if(q!==-1){const b=s.substring(0,q),r=t.substring(q+1),p=r.split('&').map(x=>{const e=x.indexOf('=');if(e===-1)return x;return `<span class="hb">${esc(x.substring(0,e))}</span><span class="he">=</span><span class="hv">${esc(x.substring(e+1))}</span>`});h=b+'<span class="hr">?</span>'+p.join('<span class="hr">&amp;</span>')}if(t.endsWith('\n'))h+='<br>';uh.innerHTML=h}
function ren(u){res.style.display='flex';ul.innerHTML='';ol.innerHTML='';const p=u.searchParams;let ho=false;man.forEach(k=>ul.appendChild(mkRow(k,p.get(k))));for(const[k,v]of p.entries()){if(!man.includes(k)){ol.appendChild(mkRow(k,v));ho=true}}os.style.display=ho?'block':'none'}
function mkRow(k,v){const d=document.createElement('div'),dv=v===null?'':v;d.className='pr';d.innerHTML=`<div class="pi"><div class="ph"><span class="pk">${k}</span><span class="pl">${dv.length} chars</span></div><input type="text" class="pv" value="${esc(dv)}" placeholder="Not set"></div><button class="cp-btn">Copy</button>`;const i=d.querySelector('.pv'),l=d.querySelector('.pl'),b=d.querySelector('.cp-btn');i.addEventListener('input',e=>{l.innerText=e.target.value.length+' chars';upUrl(k,e.target.value)});b.onclick=()=>i.value&&cp(i.value,b);return d}
function upUrl(k,v){try{const u=new URL(ui.value);v?u.searchParams.set(k,v):u.searchParams.set(k,'');ui.value=u.toString();cc.innerText=ui.value.length+' chars';upBox()}catch{}}
function an(sv){const v=ui.value.trim();cc.innerText=v.length+' chars';if(!v){res.style.display='none';return}try{const u=new URL(v);ren(u);if(sv)addH(v)}catch{res.style.display='none'}}
function addH(u){if(H.length&&H[0].u===u)return;H=H.filter(i=>i.u!==u);H.unshift({u,t:new Date().toLocaleString()});if(H.length>50)H.pop();svH();ldH();G('svBtn').style.color='var(--s-tx)';setTimeout(()=>G('svBtn').style.color='',1e3)}
function ldH(){hl.innerHTML='';if(!H.length){hl.innerHTML='<li style="padding:20px;text-align:center;font-size:13px;color:var(--t2);font-style:italic">No history</li>';return}H.forEach(i=>{const l=document.createElement('li');l.className='hi';l.innerHTML=`<span class="hu">${esc(i.u)}</span><span class="ht">${i.t}</span><button class="h-del">âœ•</button>`;l.onclick=e=>{if(e.target.className!=='h-del'){ui.value=i.u;upBox();an(false)}};l.querySelector('.h-del').onclick=e=>{e.stopPropagation();H=H.filter(x=>x.u!==i.u);svH();ldH()};hl.appendChild(l)})}
function expCsv(){if(!H.length)return alert('No history');const k=new Set();H.forEach(i=>{try{new URL(i.u).searchParams.forEach((_,key)=>k.add(key))}catch{}});const pk=Array.from(k).sort(),h=['Timestamp','URL',...pk],r=H.map(i=>{try{const p=new URL(i.u).searchParams;return[i.t,i.u,...pk.map(x=>p.get(x)||'')].map(c=>`"${String(c).replace(/"/g,'""')}"`).join(',')}catch{return ''}});const b=new Blob([[h.join(','),...r].join('\n')],{type:'text/csv'}),a=document.createElement('a');a.href=URL.createObjectURL(b);a.download='history.csv';a.click()}
// Events
ui.addEventListener('input',()=>{upBox();an(false)});
ui.addEventListener('keydown',e=>{if(e.key==='Enter'&&!e.shiftKey){e.preventDefault();an(true)}});
G('svBtn').onclick=()=>an(true);
G('cpBtn').onclick=()=>ui.value&&cp(ui.value,G('cpBtn'));
G('clrBtn').onclick=()=>{if(confirm('Clear history?')){H=[];svH();ldH()}};
G('tgSb').onclick=()=>G('sb').classList.toggle('col');
G('tm').onchange=e=>{document.documentElement.setAttribute('data-theme',e.target.checked?'dark':'');localStorage.setItem('tm',e.target.checked?'dark':'')};
G('exLnk').onclick=()=>{ui.value=G('exLnk').innerText;upBox();an(false)};
G('csvBtn').onclick=expCsv;
// Init
if(localStorage.getItem('tm')==='dark'){G('tm').checked=true;document.documentElement.setAttribute('data-theme','dark')}
ldH();
</script></body></html>